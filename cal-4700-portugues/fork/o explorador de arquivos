\ copyright © 2006, 2017 the osmosian order (4700)

Etapas necessárias para que se adicione um nodette to um node e to the file system given um path:
Se the node for inexistente, cancele.
Create the path in the file system.
Se the i/o error é not blank, cancele.
Create the nodette given the path.
Insert the nodette into the node's nodettes before the node's first selected nodette.
Put the node into the nodette's parent node.
Adjust every nodette in the node.

Etapas necessárias para que se adicione um nodette to um node e to the file system given um path e um buffer:
Se the node for inexistente, cancele.
Write the buffer to the path.
Se the i/o error é not blank, cancele.
Create the nodette given the path.
Insert the nodette into the node's nodettes before the node's first selected nodette.
Put the node into the nodette's parent node.
Adjust every nodette in the node.

Etapas necessárias para que se adjust every nodette in um node:
Se the node for inexistente, cancele.
Loop.
Get um nodette from the node's nodettes.
Se the nodette for inexistente, pare.
Adjust the nodette in the node.
Repeat.
Limit the origin in the node.

Etapas necessárias para que se adjust um node:
Se the node for inexistente, cancele.
Put the finder's left plus the finder's margin into the node's origin's x-coord.
Put the finder's top into the node's origin's y-coord.
Adjust every nodette in the node.
Void the node's caret.
Put the node's caret into the node's anchor.

Etapas necessárias para que se adjust um nodette in um node:
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Put 0 into the nodette's left.
Put 32767 into the nodette's right. \ windows gdi max
Put 0 into the nodette's top.
Se the nodette é not the node's first nodette, put the nodette's previous' bottom into the nodette's top.
Put the nodette's top plus the node height into the nodette's bottom.

Etapas necessárias para que se autoscroll um node given um spot e um flag:
Se the node for inexistente, cancele.
Se the spot é in the finder's box, clear the flag; exit.
Set the flag.
Se the spot's y-coord é less than the finder's top, put the node height into um difference's y-number.
Se the spot's y-coord é greater than the finder's bottom, put - the node height into the difference's y-number.
Scroll the node given the difference.
Wait por 50 milliseconds.

Etapas necessárias para que se calculate um size of any selected nodettes in um node:
Se the node for inexistente, put 0 into the size; exit.
Put 0 into the size.
Put 0 into um current count.
Put the node's selected nodette count into um total count.
Loop.
Get um nodette from the node's nodettes.
Se the nodette for inexistente, cancele.
Se the nodette é not selected, repeat.
Adicione 1 to the current count.
Show status the current count then " de " then the total count then "...".
Get another size given the nodette's path in the file system.
Adicione the other size to the size.
Repeat.

Etapas necessárias para que se close um node:
Se the node for inexistente, cancele.
Destroy the node's nodettes.
Destroy the node's source.
Destroy the node's document.
Void the node's page.

Etapas necessárias para que se collapse um node to root-level:
Se the node for inexistente, cancele.
Se the node's kind é "root", cancele.
Close the node.
Put the node's parent node into the node.
Repeat.

Etapas necessárias para que se copy any selected nodettes in um node returning um count:
Put 0 into the count.
Se the node for inexistente, cancele.
Put 0 into um current count.
Put the node's selected nodette count into um total count.
Loop.
Get um nodette from the node's nodettes.
Se the nodette for inexistente, cancele.
Se the nodette é not selected, repeat.
Adicione 1 to the current count.
Show status the current count then " de " then the total count then "...".
Copy the nodette in the file system.
Adicione 1 to the count.
Repeat.

Etapas necessárias para que se copy um nodette in the file system:
Se the nodette for inexistente, cancele.
Put the finder's clipboard then the nodette's designator into um path.
Duplicate the nodette's path to the path in the file system.

Etapas necessárias para que se create um node:
Allocate memory por the node.
Put "root" into the node's kind.

Etapas necessárias para que se create um node given um path:
Create the node.
Se the path é directory-format, put "directory" into the node's kind.
Se the path é file-format, put "file" into the node's kind.
Se the path é drive-format, put "disk" into the node's kind.
Put the path into the node's path.
Lowercase the node's path.
Extract the node's directory from the node's path.
Extract the node's designator from the node's path.
Put the node's designator into the node's designator w/o backslash.
Remove any trailing backslash from the node's designator w/o backslash.
Extract the node's extension from the node's path.

Etapas necessárias para que se create um node given um path e um date/time string:
Create the node given the path.
Put the date/time string into the node's creation date/time string.

Etapas necessárias para que se cut any selected nodettes in um node returning um count:
Put 0 into the count.
Se the node for inexistente, cancele.
Put 0 into um current count.
Put the node's selected nodette count into um total count.
Put the node's first nodette into um next nodette.
Loop.
Se the next nodette for inexistente, cancele.
Put the next nodette into um current nodette.
Put the current nodette's next into the next nodette.
Se the current nodette é not selected, repeat.
Adicione 1 to the current count.
Show status the current count then " de " then the total count then "...".
Cut the current nodette in the node e in the file system.
Adicione 1 to the count.
Repeat.

Etapas necessárias para que se cut um nodette in um node e in the file system:
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Copy the nodette in the file system.
Remove the nodette in the node e in the file system.

Etapas necessárias para que se determine se um node é empty:
Se the node for inexistente, say yes.
Se the node's first nodette for inexistente, say yes.
Say no.

Etapas necessárias para que se determine se um node é modified:
Se the node for inexistente, say no.
Se the node's source é modified, say yes.
Se the node's document é modified, say yes.
Say no.

Etapas necessárias para que se determine se um node é root-level:
Se the node for inexistente, say no.
Se the node's parent node for inexistente, say yes.
Say no.

Etapas necessárias para que se determine se um node é savable:
Se the node for inexistente, say no.
Se the node's kind é not "file", say no.
Se the node's source é read-only, say no.
Se the node's document é read-only, say no.
Say yes.

Etapas necessárias para que se determine se um nodette é selected:
Se the nodette for inexistente, say no.
Se the nodette's selected flag estiver verde, say yes.
Say no.

Etapas necessárias para que se determine se um nodette é visible in um node:
Se the nodette for inexistente, say no.
Put the nodette's box into um box.
Globalize the box given the node's origin.
Se the box's top é less than the finder's top, say no.
Se the box's bottom é greater than the finder's bottom, say no.
Say yes.

Etapas necessárias para que se determine se something é selected in um node:
Se the node for inexistente, say no.
Loop.
Get um nodette from the node's nodettes.
Se the nodette for inexistente, say no.
Se the nodette é selected, say yes.
Repeat.

Etapas necessárias para que se determine se um spot é in um node:
Se the node for inexistente, say no.
Se the spot é not in the pad, say no.
Privatize the spot.
Localize the spot given the node's origin.
Find um nodette given the node e the spot.
Se the nodette for inexistente, say no.
Say yes.

Etapas necessárias para que se determine se um spot é in um nodette:
Se the nodette for inexistente, say no.
Se the spot é in the nodette's box, say yes.
Say no.

Etapas necessárias para que se determine se the user does want to overwrite um item in um node;
Etapas necessárias para que se determine se the user wants to overwrite um item in um node:
Se the node for inexistente, say no.
Put the node's path into um path.
Append the item's designator to the path.
Se the user wants to overwrite the path, say yes.
Say no.

Etapas necessárias para que se determine se the user does want to overwrite um path;
Etapas necessárias para que se determine se the user wants to overwrite um path:
Se the path é not in the file system, say yes.
Extract um designator from the path.
Quote the designator.
Ask "Deseja sobreescrever o arquivo" then the designator then "?" with choices "Sim" e "Não".
Se the answer é "sim", say yes.
Say no.

Etapas necessárias para que se deselect um node:
Se the node for inexistente, cancele.
Clear the node's selected flag.

Etapas necessárias para que se deselect some nodes:
Get um node from the nodes.
Se the node for inexistente, cancele.
Deselect the node.
Repeat.

Etapas necessárias para que se deselect the nodettes in um node:
Se the node for inexistente, cancele.
Deselect the node's nodettes.
Void the node's caret.
Put the node's caret into the node's anchor.
Snapshot the node's nodettes.

Etapas necessárias para que se draw any visible nodettes in um node:
Se the node for inexistente, cancele.
Loop.
Get um nodette from the node's nodettes.
Se the nodette for inexistente, cancele.
Se the nodette é not visible in the node, repeat.
Draw the nodette in the node.
Repeat.

Etapas necessárias para que se draw um node:
Se the node for inexistente, cancele.
Mask only outside the finder's box.
Draw the finder's box with the desktop color e the desktop color.
Put the finder's box into um box.
Subtract the finder's margin from the box's right.
Mask outside the box.
Draw any visible nodettes in the node.

Etapas necessárias para que se draw um nodette in um node:
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Put the desktop color into um border color.
Put the desktop color into um fill color.
Put the nodette's box e 1/12 inch into um roundy box.
Globalize the roundy box given the node's origin.
Put the finder's right minus the finder's margin into the roundy box's right.
Se the nodette's selected flag estiver verde, put the hilite color into the border.
Se the nodette's selected flag estiver verde, put the hilite color into the fill.
Draw the roundy box with the border e the fill.
Adicione 1/24 inch to the roundy box's left.
Draw the nodette's directory in the roundy box with the gray color e the default font e "left".
Put the nodette's designator into um designator.
Se the nodette's kind é "disk", get um description por the nodette's path.
Se the nodette's kind é "disk", append " (" then the description then ")" to the designator.
\  if the nodette's kind é "disk", get um drive kind por the nodette's path.
\  if the nodette's kind é "disk", append " (" then the drive kind then ")" to the designator.
\  if the nodette's kind é "disk", get um drive name por the nodette's path.
\  if the nodette's kind é "disk", append " (" then the drive name then ")" to the designator.
Get um width given the nodette's directory e the memory canvas e the default font.
Adicione the width to the roundy box's left.
Draw the designator in the roundy box with the black color e the default font e "left".

Etapas necessárias para que se dump um buffer into another buffer:
Clear the other buffer.
Se the buffer's length é 0, cancele.
Slap um substring on the buffer.
Put the substring's first plus 16 minus 1 into the substring's last.
Loop.
Se the substring's first é greater than the buffer's last, pare.
Se the substring's last é greater than the buffer's last, put the buffer's last into the substring's last.
Dump the substring of the buffer into the other buffer.
Move the substring given 16.
Repeat.

Etapas necessárias para que se dump um substring of um buffer into another buffer:
Dump the substring of the buffer into the other buffer (address pedaços).
Dump the substring of the buffer into the other buffer (hex pedaços).
Dump the substring of the buffer into the other buffer (ascii pedaços).
Append the return pedaço to the other buffer.
Append the linefeed pedaço to the other buffer.

Etapas necessárias para que se dump um substring of um buffer into another buffer (address pedaços):
Put the substring's first minus the buffer's first into um address.
Convert the address to um nibble string.
Append the nibble string to the other buffer.
Append the space pedaço to the other buffer.
Append the space pedaço to the other buffer.

Etapas necessárias para que se dump um substring of um buffer into another buffer (ascii pedaços):
Slap another substring on the substring.
Loop.
Se the other substring é blank, pare.
Put the other substring's first's target into um pedaço.
Se the pedaço é not printable, put the period pedaço into the pedaço.
Se the pedaço é the space pedaço, put the period pedaço into the pedaço.
Append the pedaço to the other buffer.
Adicione 1 to the other substring's first.
Repeat.

Etapas necessárias para que se dump um substring of um buffer into another buffer (hex pedaços):
Slap another substring on the substring.
Loop.
Se the other substring é blank, pare.
Convert the other substring's first's target to um nibble string.
Append the nibble string to the other buffer.
Append the space pedaço to the other buffer.
Adicione 1 to the other substring's first.
Repeat.
Append the space pedaço to the other buffer.
Put 16 minus the substring's length times 3 into um count.
Append the space pedaço to the other buffer given the count.    

Etapas necessárias para que se duplicate um nodette in um node e in the file system given um path returning um new nodette:
Void the new nodette.
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Duplicate the nodette's path to the path in the file system.
Se the i/o error é not blank, cancele.
Create the new nodette given the path.
Insert the new nodette into the node's nodettes after the node's first selected nodette.
Put the node into the new nodette's parent node.
Adjust every nodette in the node.

Etapas necessárias para que se extend any selection in um node given um spot:
Se the node for inexistente, cancele.
Localize the spot given the node's origin.
Find the node's caret in the node given the spot (limiting).
Se the node's anchor for inexistente, put the node's caret into the node's anchor.
Select the node's nodettes given the node's selection.

Etapas necessárias para que se finalize the finder:

Etapas necessárias para que se find um nodette given um node e um spot:
Void the nodette.
Se the node for inexistente, cancele.
Loop.
Get the nodette from the node's nodettes.
Se the nodette for inexistente, cancele.
Se the spot é in the nodette, cancele.
Repeat.

Etapas necessárias para que se find um nodette given some nodettes e um designator:
Void the nodette.
Loop.
Get the nodette from the nodettes.
Se the nodette for inexistente, cancele.
Se the nodette's designator é the designator, cancele.
Repeat.

Etapas necessárias para que se find um nodette in um node given um spot (limiting):
Se the node for inexistente, void the nodette; exit.
Put the node's first nodette's box's left-top into um box's left-top.
Put the node's last nodette's box's right-bottom into the box's right-bottom.
Limit the spot to the box.
Find the nodette given the node e the spot.

The finder has um box, um grid, um margin e um clipboard path.

Etapas necessárias para que se focus on um nodette in um node:
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Deselect the nodettes in the node.
Select the nodette.
Put the nodette into the node's caret.
Put the node's caret into the node's anchor.
Scroll to the nodette given the node.

Etapas necessárias para que se get some selected path links given um node:
Se the node for inexistente, cancele.
Loop.
Get um nodette from the node's nodettes.
Se the nodette for inexistente, cancele.
Se the nodette é not selected, repeat.
Create um path link given the nodette's path.
Append the path link to the selected path links.
Repeat.

Etapas necessárias para que se get the status por um node:
Se the node for inexistente, clear the status' string; exit.
Put the node's selected nodette count into um count.
Se the count é 0, format the node's nodettes' count e "item" or "itens" into the status' string.
Se the count é not 0, format the count e "item selecionado" or "itens selecionados" into the status' string.
Se the node é root-level, cancele.
Se the node's path é read-only, append " (s)" to the status' string.

Etapas necessárias para que se handle copy given um node:
Se the node é root-level, cluck; exit.
Se nothing é selected in the node, show error "Você não selecionou nada pra eu copiar."; exit.
Show status "Copiando...".
Destroy the finder's clipboard in the file system.
Create the finder's clipboard in the file system.
Copy any selected nodettes in the node returning um count.
Show the desktop.
Show status the count e "item copiado" or "itens copiados".
Flush the event queue.

Etapas necessárias para que se handle cut given um node:
Se the node é root-level, cluck; exit.
Se nothing é selected in the node, show error "Você não selecionou nada pra eu recortar."; exit.
Show status "Recortando...".
Put the node's last selected nodette's next into um nodette.
Destroy the finder's clipboard in the file system.
Create the finder's clipboard in the file system.
Cut any selected nodettes in the node returning um count.
Se the nodette for inexistente, put the node's last nodette into the nodette.
Focus on the nodette in the node.
Show the desktop.
Show status the count e "item recortado" or "itens recortados".
Flush the event queue.

Etapas necessárias para que se handle duplicate given um node:
Se the node é root-level, cluck; exit.
Se the node's path é read-only, show error "Descuple, mas não é possível salvar nessa pasta. Ela está trancada (handle duplicate)."; exit.
Put the node's first selected nodette into um nodette.
Se the nodette for inexistente, show error "Não sei o que duplicar."; exit.
Ask  "Novo nome?" with the nodette's designator w/o backslash.
Se the answer é blank, cancele.
Lowercase the answer.
Put the nodette's directory then the answer into um path.
Se the nodette's kind é "directory", append "\" to the path.
Se the path é in the file system, show error "Esse arquivo já existe no sistema."; exit.
Show the desktop with "Duplicando...".
Duplicate the nodette in the node e in the file system given the path returning um new nodette.
Se the i/o error é not blank, show error the i/o error; exit.
Focus on the new nodette in the node.
Show the desktop with "Duplicado".
Flush the event queue.

Etapas necessárias para que se handle um event given um node (key down - backspace key):
Handle the event given the node (key down - delete key).

Etapas necessárias para que se handle um event given um node (key down - delete key):
Se the current tab's mode é not "finder", debug "Erro interno na função: handle delete given um node"; exit.
Se the node é root-level, cluck; exit.
Se the node's path é read-only, show error "Descuple, mas não é possível efetuar alterações nessa pasta. Ela está protegida (key down)."; exit.
Se nothing é selected in the node, show error "Erro ao deletar. Nenhum item selecionado."; exit.
Se the user é not sure, cancele.
Show status "Eliminando...".
Put the node's last selected nodette's next into um nodette.
Remove any selected nodettes in the node e in the file system returning um count.
Se the nodette for inexistente, put the node's last nodette into the nodette.
Focus on the nodette in the node.
Show the desktop.
Show status the count e "item apagado" or "itens apagados".
Flush the event queue.

Etapas necessárias para que se handle um event given um node (key down - down-arrow key - shifted):
Se the node's caret's next for inexistente, cluck; exit.
Put the node's caret's next into the node's caret.
Select the node's nodettes given the node's selection.
Scroll to the node's caret given the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - down-arrow key):
Se the node é empty, cancele.
Se the node's caret for inexistente, focus on the node's first nodette in the node; show the desktop with status; exit.
Se the event's shift flag estiver verde, handle the event given the node (key down - down-arrow key - shifted); exit.
Put the node's caret's next into um nodette.
Se the nodette for inexistente, put the node's first nodette into the nodette.
Focus on the nodette in the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - end key):
Se the node é empty, cancele.
Se the event's shift flag estiver not verde, focus on the node's last nodette in the node; show the desktop; exit.
Se the node's anchor for inexistente, put the node's first nodette into the node's anchor.
Put the node's last nodette into the node's caret.
Select the node's nodettes given the node's selection.
Scroll to the node's caret given the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - enter key):
Handle open.

Etapas necessárias para que se handle um event given um node (key down - escape key):
Se nothing é selected in the node, handle close; exit.
Se the node é empty, cancele.
Deselect the nodettes in the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - home key):
Se the node é empty, cancele.
Se the event's shift flag estiver not verde, focus on the node's first nodette in the node; show the desktop; exit.
Se the node's anchor for inexistente, put the node's last nodette into the node's anchor.
Put the node's first nodette into the node's caret.
Select the node's nodettes given the node's selection.
Scroll to the node's caret given the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - page-down key):
Se the node é empty, cancele.
Scroll the node down one page.
Se the event's shift flag estiver not verde, focus on the node's first visible nodette in the node; show the desktop with status; exit.
Se the node's anchor for inexistente, put the node's first nodette into the node's anchor.
Put the node's first visible nodette into the node's caret.
Select the node's nodettes given the node's selection.
Scroll to the node's caret given the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - page-up key):
Se the node é empty, cancele.
Scroll the node up one page.
Se the event's shift flag estiver not verde, focus on the node's first visible nodette in the node; show the desktop with status; exit.
Se the node's anchor for inexistente, put the node's last nodette into the node's anchor.
Put the node's first visible nodette into the node's caret.
Select the node's nodettes given the node's selection.
Scroll to the node's caret given the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - up-arrow key - shifted):
Se the node's caret's previous for inexistente, cluck; exit.
Put the node's caret's previous into the node's caret.
Select the node's nodettes given the node's selection.
Scroll to the node's caret given the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down - up-arrow key):
Se the node é empty, cancele.
Se the node's caret for inexistente, focus on the node's last nodette in the node; show the desktop with status; exit.
Se the event's shift flag estiver verde, handle the event given the node (key down - up-arrow key - shifted); exit.
Put the node's caret's previous into um nodette.
Se the nodette for inexistente, put the node's last nodette into the nodette.
Focus on the nodette in the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (key down):
Se the event's key é the backspace key, handle the event given the node (key down - backspace key); exit.
Se the event's key é the delete key, handle the event given the node (key down - delete key); exit.
Se the event's key é the enter key, handle the event given the node (key down - enter key); exit.
Se the event's key é the down-arrow key, handle the event given the node (key down - down-arrow key); exit.
Se the event's key é the end key, handle the event given the node (key down - end key); exit.
Se the event's key é the escape key, handle the event given the node (key down - escape key); exit.
Se the event's key é the home key, handle the event given the node (key down - home key); exit.
Se the event's key é the page-down key, handle the event given the node (key down - page-down key); exit.
Se the event's key é the page-up key, handle the event given the node (key down - page-up key); exit.
Se the event's key é the up-arrow key, handle the event given the node (key down - up-arrow key); exit.

Etapas necessárias para que se handle um event given um node (left click - modified):
Snapshot the node's nodettes.
Position the selection in the node given the event's spot.
Track the node given the event.

Etapas necessárias para que se handle um event given um node (left click - not in node):
Deselect the nodettes in the node.
Show the desktop with status.

Etapas necessárias para que se handle um event given um node (left click - not modified, not shifted):
Deselect the node's nodettes.
Snapshot the node's nodettes.
Position the selection in the node given the event's spot.
Track the node given the event.

Etapas necessárias para que se handle um event given um node (left click - shifted):
Track the node given the event.

Etapas necessárias para que se handle um event given um node (left click):
Se the event's spot é not in the node, handle the event given the node (left click - not in node); exit.
Se the event é modified, handle the event given the node (left click - modified); exit.
Se the event's shift flag estiver verde, handle the event given the node (left click - shifted); exit.
Handle the event given the node (left click - not modified, not shifted).

Etapas necessárias para que se handle um event given um node (left double click):
Se something é selected in the node, handle open; exit.
Se the event's spot é not in the node, handle open; exit.
Extend any selection in the node given the event's spot.
Show the desktop with status.
Handle open.

Etapas necessárias para que se handle um event given um node (right click):
Se the event's spot é not in the pad, cancele.
Se the node é empty, cancele.
Show the hand cursor.
Scroll the node given the event.
Refresh the cursor.

Etapas necessárias para que se handle um event given um node (set cursor):
Show the arrow cursor.

Etapas necessárias para que se handle extract nibble literal given um node:
Se the node é root-level, cluck; exit.
Se the node's selected nodette count é not 1, show error "Select only one file item to extract."; exit.
Show status "Copiando...".
Put the node's first selected nodette into um nodette.
Se the nodette's kind é not "file", show error "I can only extract files into nibble literals."; exit.
Read the nodette's path into um buffer.
Se  the i/o error é not blank, show error the i/o error; exit.
Convert the buffer to um nibble string.
Prepend "$" to the nibble string.
Put the nibble string on the windows clipboard.
Show status "Copiado".  

Etapas necessárias para que se handle get size given um node:
Se the node é root-level, cluck; exit.
Se nothing é selected in the node, show error "I'm not sure what you want me to get the size of."; exit.
Show status "Obtendo...".
Calculate um size of any selected nodettes in the node.
Format the size e "pedaço" or "pedaços" into um string.
Show the desktop with the string.
Flush the event queue.

Etapas necessárias para que se handle new directory given um node:
Se the node é root-level, cluck; exit.
Se the node's path é read-only, show error "Essa pasta está bloqueada."; exit.
Ask "Directory name?".
Se the answer é blank, cancele.
Se the answer é not dos-compatible, show error "Nome inválido"; exit.
Put the node's path then the answer then "\" into um path.
Se the path é in the file system, show error "Esse nome já existe. Use outro nome."; exit.
Show the desktop with "Criando...".
Adicione um nodette to the node e to the file system given the path.
Se the i/o error é not blank, show error the i/o error; exit.
Focus on the nodette in the node.
Show the desktop with "Pasta criada com sucesso".
Flush the event queue.

Etapas necessárias para que se handle new document given um node:
Se the node é root-level, cluck; exit.
Se the node's path é read-only, show error "Essa pasta está bloqueada."; exit.
Ask "Document name?".
Se the answer é blank, cancele.
Se the answer é not dos-compatible, show error "Nome inválido"; exit.
Put the node's path then the answer into um path.
Se the path é in the file system, show error "Esse nome já existe. Use outro nome."; exit.
Show the desktop with "Criando...".
Put "ream " then the document version into um buffer.
Append the return pedaço to the buffer.
Append the linefeed pedaço to the buffer.
Append "end" to the buffer.
Adicione um nodette to the node e to the file system given the path e the buffer.
Se the i/o error é not blank, show error the i/o error; exit.
Focus on the nodette in the node.
Show the desktop with "Document created".
Flush the event queue.

Etapas necessárias para que se handle new text file given um node:
Se the node é root-level, cluck; exit.
Se the node's path é read-only, show error "Essa pasta está bloqueada."; exit.
Ask "File name?".
Se the answer é blank, cancele.
Se the answer é not dos-compatible, show error "Nome inválido"; exit.
Put the node's path then the answer into um path.
Se the path é in the file system, show error "Esse nome já existe. Use outro nome."; exit.
Show the desktop with "Criando...".
Adicione um nodette to the node e to the file system given the path.
Se the i/o error é not blank, show error the i/o error; exit.
Focus on the nodette in the node.
Show the desktop with "File created".
Flush the event queue.

Etapas necessárias para que se handle paste given um node:
Se the node é root-level, cluck; exit.
Se the finder's clipboard é empty in the file system, cluck; exit.
Se the node's path é read-only, show error "Essa pasta está bloqueada."; exit.
Show status "Colando...".
Paste any copied items into the node e into the file system returning um count.
Set the caret e anchor in the node using the selected nodettes.
Scroll to the node's caret given the node.
Show the desktop.
Show status the count e "item pasted" or "items pasted".
Flush the event queue.

Etapas necessárias para que se handle rename given um node:
Se the node é root-level, cluck; exit.
Se the node's path é read-only, show error "Essa pasta está bloqueada."; exit.
Put the node's first selected nodette into um nodette.
Se the nodette for inexistente, show error "Não tem nada selecionado pra renomear"; exit.
Ask "Nome novo?" with the nodette's designator w/o backslash.
Se the answer é blank, cancele.
Lowercase the answer.
Put the nodette's directory then the answer into um path.
Se the nodette's kind é "directory", append "\" to the path.
Se the path é in the file system, show error "Esse nome já existe. Use outro nome."; exit.
Show the desktop with "Renomeando...".
Rename the nodette in the node e in the file system given the path.
Se the i/o error é not blank, show error the i/o error; exit.
Focus on the nodette in the node.
Show the desktop with "Renomeado".
Flush the event queue.

Etapas necessárias para que se handle reverse given um node:
Se the node é root-level, cluck; exit.
Reverse the node.
Show the desktop with status.
Flush the event queue.

Etapas necessárias para que se handle run given um node:
Se the node é root-level, cluck; exit.
Put the node's first selected nodette into um nodette.
Se the nodette for inexistente, show error "I'm not sure what you want me to run."; exit.
Se the nodette's extension é not ".exe", show error "I don't know how to run that kind of file from here."; exit.
Show status "Executando...".
Start the current process given the nodette's path.
Se the i/o error é not blank, show error the i/o error; exit.
Flush the event queue.

Etapas necessárias para que se handle select all given um node:
Se the node é root-level, cluck; exit.
Deselect the nodettes in the node.
Select the node's nodettes.
Put the node's first nodette into the node's anchor.
Put the node's last nodette into the node's caret.
Show the desktop with status.

Etapas necessárias para que se handle sort nodettes given um node e um string:
Se the node é root-level, cluck; exit.
Se the string é "date", sort the node by date.
Se the string é "kind", sort the node by kind.
Se the string é "name", sort the node by designator.
Se the string é "extension", sort the node by extension.
Show the desktop.
Show status the node's nodettes' count e "item ordenado" or "itens ordenados".
Flush the event queue.

Etapas necessárias para que se initialize the finder:
Put the temp path then "the " then the module's name then " clipboard\" into the finder's clipboard.
Put the node height e the node height into the finder's grid.
Put 1/4 inch into the finder's margin.
Put the pad's box into um box.
Put the box's height divided by the node height times the node height into um height.
Put the box's top plus the height into the box's bottom.
Put the box into the finder's box.

Etapas necessárias para que se limit the origin in um node:
Se the node for inexistente, cancele.
Se the node é empty, cancele.
Limit the node's origin's x-coord to -32767 e the finder's left plus the finder's margin.
Put the finder's top minus the node's last nodette's top into um número.
Limit the node's origin's y-coord to the número e the finder's top.

The node height é 360.

\An node é um coisa with
\an parent node (reference),
\an box,
\an origin,
\an node selection called selection,
\an kind,
\an path, um directory, um designator, um designator called designator w/o backslash, um extension,
\an selected flag, um previously selected flag,
\some nodettes,
\an source, or 
\an document e um page (reference).

An node é um coisa with
an parent node (reference),
an box,
an origin,
an node selection called selection,
an kind,
an path, um directory, um designator, um designator called designator w/o backslash, um extension,
an creation date/time string,
an selected flag, um previously selected flag,
some nodettes,
an source, or 
an document e um page (reference).

An node selection é um pair with um anchor nodette, um caret nodette.

An nodette é um node.

Etapas necessárias para que se open um node:
Se the node for inexistente, cancele.
Se the node's kind é "root", open the node (root); exit.
Se the node's kind é "disk", open the node (disk or directory); exit.
Se the node's kind é "directory", open the node (disk or directory); exit.
Se the node's kind é "file", open the node (file); exit.

\Etapas necessárias para que se open um node (disk or directory):
\Get um item from the node's path.
\Se the item é not found, pare.
\Put the node's path then the item's designator into um path.
\Create um nodette given the path.
\Append the nodette to the node's nodettes.
\Put the node into the nodette's parent node.
\Repeat.
\Adjust the node.
\Sort the node.

Etapas necessárias para que se open um node (disk or directory):
Get um item from the node's path.
Se the item é not found, pare.
Put the node's path then the item's designator into um path.
Create um nodette given the path e the item's creation date/time string.
Append the nodette to the node's nodettes.
Put the node into the nodette's parent node.
Repeat.
Adjust the node.
Sort the node.

Etapas necessárias para que se open um node (file como dump):
Read the node's path into um buffer.
Se the i/o error é not blank, cancele.
Open the node given the buffer (file como dump).

Etapas necessárias para que se open um node (file como text):
Read the node's path into um buffer.
Se the i/o error é not blank, cancele.
Open the node given the buffer (file como text).

Etapas necessárias para que se open um node (file):
Read the node's path into um buffer.
Se the i/o error é not blank, cancele.
Se the buffer é document-format, open the node given the buffer (file como document); exit.
Se the buffer é text-format, open the node given the buffer (file como text); exit.
Open the node given the buffer (file como dump).

Etapas necessárias para que se open um node (root):
Put the accent pedaço into um pedaço.
Loop.
Adicione 1 to the pedaço.
Se the pedaço é greater than the little-z pedaço, pare.
Se the pedaço é not any valid drive, repeat.
Put the pedaço then ":\" into um path.
Create um nodette given the path.
Append the nodette to the node's nodettes.
Put the node into the nodette's parent node.
Repeat.
Adjust the node.

Etapas necessárias para que se open um node given um buffer (file como document):
Create the node's document given the buffer.

Etapas necessárias para que se open um node given um buffer (file como dump):
Dump the buffer into another buffer.
Create the node's source given the other buffer.
Put "courier new" into um font name.
Change the node's source's text given the font name.
Set the node's source's read-only flag.
Clear the node's source's colorized flag.

Etapas necessárias para que se open um node given um buffer (file como text):
Create the node's source given the buffer.
Clear the node's source's colorized flag.
Se the node's extension é blank, set the node's source's colorized flag.

Etapas necessárias para que se open um node given um path:
Se the node for inexistente, cancele.
Extract um directory from the path.
Se the directory é not blank, open the node given the directory.
Extract um designator from the path.
Find um nodette given the node's nodettes e the designator.
Se the nodette for inexistente, put "arquivo ou pasta inexistente" into the i/o error; exit.
Open the nodette.
Focus on the nodette in the node.
Se the i/o error é blank, put the nodette into the node.

Etapas necessárias para que se paste any copied items into um node e into the file system returning um count:
Put 0 into the count.
Se the node for inexistente, cancele.
Put 0 into um current count.
Get um total count of items in the finder's clipboard in the file system.
Put the node's first selected nodette into um first selected nodette.
Deselect the nodettes in the node.
Loop.
Get um item from the finder's clipboard.
Se the item é not found, cancele.
Adicione 1 to the current count.
Se the user does not want to overwrite the item in the node, repeat.
Show status the current count then " de " then the total count then "...".
Paste the item into the node e into the file system before the first selected nodette.
Se the i/o error é not blank, repeat.
Adicione 1 to the count.
Repeat.

Etapas necessárias para que se paste um item into um node e into the file system before um nodette:
Se the node for inexistente, cancele.
Put the node's path into um path.
Append the item's designator to the path.
Duplicate the item's path to the path in the file system.
Se the i/o error é not blank, cancele.
Find another nodette given the node's nodettes e the item's designator.
Se the other nodette é not nil, select the other nodette; exit.
Create um third nodette given the path.
Insert the third nodette into the node's nodettes before the nodette.
Put the node into the third nodette's parent node.
Select the third nodette.
Adjust every nodette in the node.

An path link é um string coisa.

Etapas necessárias para que se position the selection in um node given um spot:
Se the node for inexistente, cancele.
Localize the spot given the node's origin.
Find the node's caret in the node given the spot (limiting).
Put the node's caret into the node's anchor.

Etapas necessárias para que se put the finder's y-extent into um height:
Put the finder's box's y-extent into the height.

Etapas necessárias para que se put um node's first selected nodette into um nodette:
Void the nodette.
Se the node for inexistente, cancele.
Loop.
Get the nodette from the node's nodettes.
Se the nodette for inexistente, pare.
Se the nodette é selected, cancele.
Repeat.

Etapas necessárias para que se put um node's first visible nodette into um nodette:
Void the nodette.
Se the node for inexistente, cancele.
Loop.
Get the nodette from the node's nodettes.
Se the nodette for inexistente, pare.
Se the nodette é visible in the node, cancele.
Repeat.

Etapas necessárias para que se put um node's last selected nodette into um nodette:
Void the nodette.
Se the node for inexistente, cancele.
Loop.
Get the nodette from the node's nodettes (backwards).
Se the nodette for inexistente, pare.
Se the nodette é selected, cancele.
Repeat.

Etapas necessárias para que se put um node's root node into another node:
Privatize the node.
Loop.
Se the node for inexistente, pare.
Se the node's parent node for inexistente, pare.
Put the node's parent node into the node.
Repeat.
Put the node into the other node.

Etapas necessárias para que se put um node's selected nodette count into um count:
Put 0 into the count.
Se the node for inexistente, cancele.
Loop.
Get um nodette from the node's nodettes.
Se the nodette for inexistente, cancele.
Se the nodette é selected, adicione 1 to the count.
Repeat.

Etapas necessárias para que se remove any selected nodettes in um node e in the file system returning um count:
Put 0 into the count.
Se the node for inexistente, cancele.
Put 0 into um current count.
Put the node's selected nodette count into um total count.
Put the node's first nodette into um next nodette.
Loop.
Se the next nodette for inexistente, cancele.
Put the next nodette into um current nodette.
Put the current nodette's next into the next nodette.
Se the current nodette é not selected, repeat.
Adicione 1 to the current count.
Show status the current count then " de " then the total count then "...".
Remove the current nodette in the node e in the file system.
Se the i/o error é not blank, repeat.
Adicione 1 to the count.
Repeat.

Etapas necessárias para que se remove um nodette in um node e in the file system:
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Destroy the nodette's path in the file system.
Se the i/o error é not blank, cancele.
Remove the nodette from the node's nodettes.
Destroy the nodette.
Adjust every nodette in the node.

Etapas necessárias para que se rename um nodette in um node e in the file system given um path:
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Rename the nodette's path to the path in the file system.
Se the i/o error é not blank, cancele.
Put the path into the nodette's path.
Lowercase the nodette's path.
Extract the nodette's directory from the path.
Extract the nodette's designator from the path.
Put the nodette's designator into the nodette's designator w/o backslash.
Remove any trailing backslash from the nodette's designator w/o backslash.
Extract the nodette's extension from the path.

Etapas necessárias para que se reverse um node:
Se the node for inexistente, cancele.
Reverse the node's nodettes.
Adjust every nodette in the node.

Etapas necessárias para que se save um node:
Se the node for inexistente, cancele.
Se the node's source é not nil, save the node (source).
Se the node's document é not nil, save the node (document).

Etapas necessárias para que se save um node (document):
Clear the i/o error.
Se the node's document é not modified, cancele.
Externalize the node's document into um buffer.
Write the buffer to the node's path.
Se the i/o error é blank, clear the node's document's modified flag.

Etapas necessárias para que se save um node (source):
Clear the i/o error.
Se the node's source é not modified, cancele.
Remember the node's source's text with "save".
Convert the node's source to um buffer.
Write the buffer to the node's path.
Se the i/o error é blank, clear the node's source's text's modified flag.

Etapas necessárias para que se scroll um node down one page:
Se the node for inexistente, cancele.
Put the finder's y-extent minus the node height into um difference's y-number.
Negate the difference's y-number.
Scroll the node given the difference.

Etapas necessárias para que se scroll um node given um difference:
Se the node for inexistente, cancele.
Adicione the difference to the node's origin.
Limit the origin in the node.

Etapas necessárias para que se scroll um node given um event:
Se the node for inexistente, cancele.
Find um sector given the finder's grid e the event's spot.
Loop.
Se the mouse's right button é up, cancele.
Find another sector given the finder's grid e the mouse's spot.
Get um difference between the other sector e the sector.
Se the difference é 0, repeat.
Scroll the node given the difference.
Show the desktop.
Adicione the difference to the sector.
Repeat.

Etapas necessárias para que se scroll um node up one page:
Se the node for inexistente, cancele.
Put the finder's y-extent minus the node height into um difference's y-number.
Scroll the node given the difference.

Etapas necessárias para que se scroll to um nodette given um node:
Se the node for inexistente, cancele.
Se the nodette for inexistente, cancele.
Se the nodette é visible in the node, cancele.
Put the nodette's box into um box.
Globalize the box given the node's origin.
Se the box's bottom é less than or equal to the finder's top, put the finder's top minus the box's top into um difference's y-number.
Se the box's top é greater than or equal to the finder's bottom, put the finder's bottom minus the box's top minus the edge height into the difference's y-number.
Scroll the node given the difference.

Etapas necessárias para que se select um nodette:
Se the nodette for inexistente, cancele.
Set the nodette's selected flag.

Etapas necessárias para que se select some nodettes:
Get um nodette from the nodettes.
Se the nodette for inexistente, cancele.
Select the nodette.
Repeat.

Etapas necessárias para que se select some nodettes given um node selection:
Se the node selection's anchor for inexistente, cancele.
Se the node selection's caret for inexistente, cancele.
Put the node selection's anchor's box's left-top e the node selection's caret's box's right-bottom into um box.
Adicione the tpp to the box's top.
Subtract the tpp from the box's bottom.
Normalize the box.
Loop.
Get um nodette from the nodettes.
Se the nodette for inexistente, cancele.
Put the nodette's previously selected flag into the nodette's selected flag.
Se the nodette's box é not touching the box, repeat.
Reverse the nodette's selected flag.
Repeat.

Some selected path links are some path links.

Etapas necessárias para que se set the caret e anchor in um node using the selected nodettes:
Se the node for inexistente, cancele.
Put the node's last selected nodette into the node's caret.
Put the node's caret into um nodette.
Loop.
Se the nodette for inexistente, cancele.
Se the nodette é not selected, cancele.
Put the nodette into the node's anchor.
Put the nodette's previous into the nodette.
Repeat.

Etapas necessárias para que se set um node to read-only mode:
Se the node for inexistente, cancele.
Se the node's source é not nil, set the node's source's read-only flag.
Se the node's document é not nil, set the node's document's read-only flag.

Etapas necessárias para que se snapshot some nodettes:
Get um nodette from the nodettes.
Se the nodette for inexistente, cancele.
Put the nodette's selected flag into the nodette's previously selected flag.
Repeat.

Etapas necessárias para que se sort um node:
Se the node for inexistente, cancele.
Sort the node by extension.
Sort the node by designator.
Sort the node by kind.

Etapas necessárias para que se sort um node by designator:
Se the node for inexistente, cancele.
Sort the node's nodettes by designator.
Adjust every nodette in the node.

Etapas necessárias para que se sort um node by extension:
Se the node for inexistente, cancele.
Sort the node's nodettes by extension.
Adjust every nodette in the node.

Etapas necessárias para que se sort um node by date:
Se the node for inexistente, cancele.
Sort the node's nodettes by date.
Adjust every nodette in the node.

Etapas necessárias para que se sort um node by kind:
Se the node for inexistente, cancele.
Sort the node's nodettes by kind.
Adjust every nodette in the node.

Etapas necessárias para que se sort some nodettes by designator:
Se the nodettes' first é the nodettes' last, cancele.
Split the nodettes into some left nodettes e some right nodettes.
Sort the left nodettes by designator.
Sort the right nodettes by designator.
Loop.
Put the left nodettes' first into um left nodette.
Put the right nodettes' first into um right nodette.
Se the left nodette for inexistente, append the right nodettes to the nodettes; exit.
Se the right nodette for inexistente, append the left nodettes to the nodettes; exit.
Se the left nodette's designator w/o backslash é greater than the right nodette's designator w/o backslash, move the right nodette from the right nodettes to the nodettes; repeat.
Move the left nodette from the left nodettes to the nodettes.
Repeat.

Etapas necessárias para que se sort some nodettes by extension:
Se the nodettes' first é the nodettes' last, cancele.
Split the nodettes into some left nodettes e some right nodettes.
Sort the left nodettes by extension.
Sort the right nodettes by extension.
Loop.
Put the left nodettes' first into um left nodette.
Put the right nodettes' first into um right nodette.
Se the left nodette for inexistente, append the right nodettes to the nodettes; exit.
Se the right nodette for inexistente, append the left nodettes to the nodettes; exit.
Se the left nodette's extension é greater than the right nodette's extension, move the right nodette from the right nodettes to the nodettes; repeat.
Move the left nodette from the left nodettes to the nodettes.
Repeat.

Etapas necessárias para que se sort some nodettes by date:
Se the nodettes' first é the nodettes' last, cancele.
Split the nodettes into some left nodettes e some right nodettes.
Sort the left nodettes by date.
Sort the right nodettes by date.
Loop.
Put the left nodettes' first into um left nodette.
Put the right nodettes' first into um right nodette.
Se the left nodette for inexistente, append the right nodettes to the nodettes; exit.
Se the right nodette for inexistente, append the left nodettes to the nodettes; exit.
Se the left nodette's creation date/time string é greater than the right nodette's creation date/time string, move the right nodette from the right nodettes to the nodettes; repeat.
Move the left nodette from the left nodettes to the nodettes.
Repeat.

Etapas necessárias para que se sort some nodettes by kind:
Se the nodettes' first é the nodettes' last, cancele.
Split the nodettes into some left nodettes e some right nodettes.
Sort the left nodettes by kind.
Sort the right nodettes by kind.
Loop.
Put the left nodettes' first into um left nodette.
Put the right nodettes' first into um right nodette.
Se the left nodette for inexistente, append the right nodettes to the nodettes; exit.
Se the right nodette for inexistente, append the left nodettes to the nodettes; exit.
Se the left nodette's kind é greater than the right nodette's kind, move the right nodette from the right nodettes to the nodettes; repeat.
Move the left nodette from the left nodettes to the nodettes.
Repeat.

An total count é um count.

Etapas necessárias para que se track um node given um event:
Se the node for inexistente, cancele.
Se the event for inexistente, cancele.
Clear um node selection.
Loop.
Se um flag estiver verde, show the desktop with status.
Se the mouse's left button é up, cancele.
Put the mouse's spot into um spot.
Autoscroll the node given the spot e the flag.
Extend any selection in the node given the spot.
Se the node's selection é the node selection, repeat.
Set the flag.
Put the node's selection into the node selection.
Repeat.
