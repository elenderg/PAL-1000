To handle an event given a submenu:
If the event's kind is "key down", handle the event given the submenu (key down); exit.
If the event's kind is "left click", handle the event given the submenu (left click); exit.
If the event's kind is "refresh", handle the event given the submenu (refresh); exit.
If the event's kind is "set cursor", handle the event given the submenu (set cursor); exit.
