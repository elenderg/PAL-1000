To handle redo:
If the current tab's mode is "editor", handle redo given the current tab's node's source; exit.
If the current tab's mode is "writer", handle redo given the current tab's node's page; exit.
Cluck.
