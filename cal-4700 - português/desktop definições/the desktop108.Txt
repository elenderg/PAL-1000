To handle a command (d):
Create a submenu.
If the current tab's mode is "editor", add "Decrypt..." and "handle decrypt" to the submenu.
If the current tab's mode is "finder", add "Duplicate" and "D" and "handle duplicate" to the submenu.
If the current tab's mode is "docster", add "Duplicate" and "D" and "handle duplicate" to the submenu.
If the current tab's mode is "writer", add "Duplicate" and "D" and "handle duplicate" to the submenu.
Handle the command given the submenu.
