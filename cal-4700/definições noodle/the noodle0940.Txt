To end printing a pdf (append the outline entries - create the objects):
Get a pdf outline entry from the pdf state's outline entries.
If the pdf outline entry is nil, exit.
Add an entry pdf object given "outline entry".
Put the entry into the pdf outline entry's pdf object.
Repeat.
